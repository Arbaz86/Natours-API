//- Extends the base layout template
extends base

mixin overviewBox(label, text, icon)
  //- Create a div to hold the label, text, and icon
  .overview-box__detail
    //- Add an SVG element for the icon, using the given icon name
    svg.overview-box__icon
      use(xlink:href=`/img/icons.svg#icon-${icon}`)
    //- Add the label text
    span.overview-box__label= label
    //- Add the text value
    span.overview-box__text= text

//- Defines the main content block
block content
  section.section-header
    .header__hero
      .header__hero-overlay &nbsp;
      img.header__hero-img(src=`/img/tours/${tour.imageCover}`, alt=`${tour.name}`)

    .heading-box
      h1.heading-primary
        span= tour.name
      .heading-box__group
        .heading-box__detail
          svg.heading-box__icon
            use(xlink:href='/img/icons.svg#icon-clock')
          span.heading-box__text= `${tour.duration} days`
        .heading-box__detail
          svg.heading-box__icon
            use(xlink:href='/img/icons.svg#icon-map-pin')
          span.heading-box__text= tour.startLocation.description

  section.section-description
    .overview-box
      div
        .overview-box__group
          h2.heading-secondary.ma-bt-lg Quick facts

          //- Create a variable 'date' and set it to the first start date of the tour.
          //- Format the date with month name and year in English locale.
          - const date = tour.startDates[0].toLocaleString("en-us", {month : "long", year : "numeric"})
          //- Each box contains an text, label, and icon.
          +overviewBox("Next date", date, "calendar")
          //- The "calender" icon will be used for the "Next date" box.
          +overviewBox("Difficulty", tour.difficulty, "trending-up")
          //- Use the "trending-up" icon for the "Difficulty" box.
          +overviewBox("Participants", `${tour.maxGroupSize} people`, "user")
          //- Use the "user" icon for the "Participants" box.
          +overviewBox("Rating", `${tour.ratingsAverage} / 5`, "star")
          //- Use the "star" icon for the "Rating" box.


        .overview-box__group
          h2.heading-secondary.ma-bt-lg Your tour guides
          .overview-box__detail
            img.overview-box__img(src='/img/users/user-19.jpg', alt='Lead guide')
            span.overview-box__label Lead guide
            span.overview-box__text Steven Miller
          .overview-box__detail
            img.overview-box__img(src='/img/users/user-18.jpg', alt='Tour guide')
            span.overview-box__label Tour guide
            span.overview-box__text Lisa Brown
          .overview-box__detail
            img.overview-box__img(src='/img/users/user-17.jpg', alt='Intern')
            span.overview-box__label Intern
            span.overview-box__text Max Smith

    .description-box
      h2.heading-secondary.ma-bt-lg About the park camper tour
      p.description__text Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
      p.description__text Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum!

  section.section-pictures
    .picture-box
      img.picture-box__img.picture-box__img--1(src='/img/tour-5-1.jpg', alt='The Park Camper Tour 1')
    .picture-box
      img.picture-box__img.picture-box__img--2(src='/img/tour-5-2.jpg', alt='The Park Camper Tour 1')
    .picture-box
      img.picture-box__img.picture-box__img--3(src='/img/tour-5-3.jpg', alt='The Park Camper Tour 1')

  section.section-map
    #map

  section.section-reviews
    .reviews

      .reviews__card
        .reviews__avatar
          img.reviews__avatar-img(src='/img/users/user-7.jpg', alt='Jim Brown')
          h6.reviews__user Jim Brown
        p.reviews__text Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque dignissimos sint quo commodi corrupti accusantium veniam saepe numquam.
        .reviews__rating
          svg.reviews__star.reviews__star--active
            use(xlink:href='/img/icons.svg#icon-star')
          svg.reviews__star.reviews__star--active
            use(xlink:href='/img/icons.svg#icon-star')
          svg.reviews__star.reviews__star--active
            use(xlink:href='/img/icons.svg#icon-star')
          svg.reviews__star.reviews__star--active
            use(xlink:href='/img/icons.svg#icon-star')
          svg.reviews__star.reviews__star--active
            use(xlink:href='/img/icons.svg#icon-star')

  section.section-cta
    .cta
      .cta__img.cta__img--logo
        img(src='/img/logo-white.png', alt='Natours logo')
      img.cta__img.cta__img--1(src='/img/tour-5-2.jpg', alt='')
      img.cta__img.cta__img--2(src='/img/tour-5-1.jpg', alt='')
      .cta__content
        h2.heading-secondary What are you waiting for?
        p.cta__text 10 days. 1 adventure. Infinite memories. Make it yours today!

        if user
          button.btn.btn--green.span-all-rows Book tour now!
        else
          a.btn.btn--green.span-all-rows(href="/login") Login to book tour